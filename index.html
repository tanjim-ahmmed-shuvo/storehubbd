<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StoreHub BD - Stun Gun Model 928</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- PDF Generation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- FACEBOOK PIXEL CODE START -->
    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1944621382787469');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1944621382787469&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->
    <!-- FACEBOOK PIXEL CODE END -->

    <style>
        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: #f3f4f6;
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div id="root"></div>

<script type="text/babel">

const { useState, useEffect, useRef } = React;

function App() {
    // --- TELEGRAM CONFIG (‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®) ---
    // BotFather ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶ü‡ßã‡¶ï‡ßá‡¶®
    const TELEGRAM_BOT_TOKEN = "8483655630:AAFqZnb89nKI_Un_oKxRGaYh23KXOrINo1k"; 
    // userinfobot ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶Ü‡¶á‡¶°‡¶ø
    const TELEGRAM_CHAT_ID = "6054624451"; 
    // ------------------------------------------

    // Generate Unique Order ID at start
    const [orderId] = useState(() => Math.floor(100000 + Math.random() * 900000).toString());

    // State Management
    const [step, setStep] = useState(1); 
    const [quantity, setQuantity] = useState(1); // Quantity State Added
    const [formData, setFormData] = useState({
        name: '',
        phone: '',
        address: '',
        paymentMethod: 'bkash', 
        senderNumber: '',
        trxId: '',
        note: ''
    });

    // Price Config
    const regularPrice = 1800;
    const discountPrice = 1499;
    const advancePayment = 100;
    const bkashNumber = "01647775899";
    const nagadNumber = "01647775899";

    // Calculate Total Price
    const totalPrice = discountPrice * quantity;

    // --- TELEGRAM SEND FUNCTION ---
    const sendToTelegram = async (message) => {
        if (TELEGRAM_BOT_TOKEN === "YOUR_BOT_TOKEN_HERE") return; // ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶®‡¶æ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ

        const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
        try {
            await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: TELEGRAM_CHAT_ID,
                    text: message,
                    parse_mode: 'HTML'
                })
            });
        } catch (error) {
            console.error("Telegram Error:", error);
        }
    };

    // --- PDF DOWNLOAD FUNCTION ---
    const downloadReceipt = () => {
        const element = document.getElementById('receipt-content');
        const opt = {
            margin:       [10, 10, 10, 10], // Margins: top, left, bottom, right
            filename:     `StoreHub_Order_${orderId}.pdf`,
            image:        { type: 'jpeg', quality: 0.98 },
            html2canvas:  { scale: 2, useCORS: true, logging: true },
            jsPDF:        { unit: 'mm', format: 'a5', orientation: 'portrait' }
        };
        
        if(window.html2pdf) {
            // Wait a bit to ensure styles are applied
            window.html2pdf().set(opt).from(element).save();
        } else {
            alert("PDF ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ, ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡ßá‡¶ú‡¶ü‡¶ø ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
        }
    };

    // --- TRACKING: VISIT ---
    useEffect(() => {
        // ‡¶ï‡ßá‡¶â ‡¶™‡ßá‡¶ú‡ßá ‡¶¢‡ßÅ‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶Ø‡¶æ‡¶¨‡ßá
        const msg = `üëÄ <b>New Visitor Arrived!</b>\nOrder ID: <code>${orderId}</code>\nStatus: Viewing Product`;
        sendToTelegram(msg);
    }, []);

    // Handle Input Change
    const handleChange = (e) => {
        setFormData({ ...formData, [e.target.name]: e.target.value });
    };

    // Handle Quantity Change
    const increaseQty = () => setQuantity(q => q + 1);
    const decreaseQty = () => setQuantity(q => q > 1 ? q - 1 : 1);

    // Step 1: Go to Payment (CAPTURE LEAD & PIXEL EVENTS)
    const handleNext = async (e) => {
        e.preventDefault();
        if(!formData.name || !formData.phone || !formData.address) {
            alert("‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ, ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶¶‡¶ø‡¶®‡•§");
            return;
        }

        // --- FACEBOOK PIXEL EVENTS (UPDATED) ---
        // Use window.fbq to ensure global scope access
        if(window.fbq) {
            console.log("Firing Pixel Events: AddToCart & InitiateCheckout");
            
            // Track AddToCart
            window.fbq('track', 'AddToCart', {
                value: totalPrice,
                currency: 'BDT',
                content_ids: ['model-928'],
                content_type: 'product',
                contents: [{id: 'model-928', quantity: quantity}]
            });

            // Track InitiateCheckout
            window.fbq('track', 'InitiateCheckout', {
                value: totalPrice,
                currency: 'BDT',
                num_items: quantity,
                content_ids: ['model-928'],
                content_type: 'product'
            });
        } else {
            console.log("Facebook Pixel (fbq) not found.");
        }

        // --- SEND DATA TO TELEGRAM (LEAD CAPTURED) ---
        // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶æ ‡¶ï‡¶∞‡¶≤‡ßá‡¶ì ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßá‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡¶®
        const msg = `üìù <b>Lead Captured (Step 1 Done)</b>\n` +
                    `Order ID: <code>${orderId}</code>\n` +
                    `Product Qty: <b>${quantity} pcs</b>\n` +
                    `Total Value: <b>${totalPrice} BDT</b>\n` +
                    `-----------------------------\n` +
                    `Name: ${formData.name}\n` +
                    `Phone: ${formData.phone}\n` +
                    `Address: ${formData.address}\n` +
                    `Status: ‚è≥ Waiting for Payment`;
        
        await sendToTelegram(msg);

        setStep(2);
        window.scrollTo(0, 0);
    };

    // Step 2: Confirm Order (FINAL ORDER)
    const handleOrderConfirm = async (e) => {
        e.preventDefault();
        if(!formData.senderNumber || !formData.trxId) {
            alert("‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∏‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®‡•§");
            return;
        }

        // --- FACEBOOK PIXEL EVENT: PURCHASE (UPDATED) ---
        if(window.fbq) {
            console.log("Firing Pixel Event: Purchase");
            window.fbq('track', 'Purchase', {
                value: totalPrice, 
                currency: 'BDT',
                num_items: quantity,
                content_ids: ['model-928'],
                content_type: 'product'
            });
        }

        // --- SEND FINAL DATA TO TELEGRAM ---
        const msg = `‚úÖ <b>ORDER CONFIRMED!</b>\n` +
                    `Order ID: <code>${orderId}</code>\n` +
                    `Qty: <b>${quantity} pcs</b> | Total: <b>${totalPrice} Tk</b>\n` +
                    `-----------------------------\n` +
                    `üë§ <b>Customer Info:</b>\n` +
                    `Name: ${formData.name}\n` +
                    `Phone: <code>${formData.phone}</code>\n` +
                    `Address: ${formData.address}\n` +
                    `-----------------------------\n` +
                    `üí∞ <b>Payment Info:</b>\n` +
                    `Method: bKash/Nagad\n` +
                    `Sender: <code>${formData.senderNumber}</code>\n` +
                    `TrxID: <code>${formData.trxId}</code>\n` +
                    `Advance Paid: 100 Tk\n` +
                    `Due Amount: ${totalPrice - 100} Tk\n` +
                    `Note: ${formData.note || 'N/A'}\n` +
                    `-----------------------------\n` +
                    `Delivery: 2-3 Days`;

        await sendToTelegram(msg);

        setStep(3);
        window.scrollTo(0, 0);
    };

    return (
        <div className="max-w-md mx-auto bg-white min-h-screen shadow-lg relative overflow-hidden">
            
            {/* Header / Navbar */}
            <div className="bg-blue-900 text-white p-3 sticky top-0 z-50 flex justify-between items-center shadow-md">
                <div className="flex items-center gap-2">
                    {/* ‡¶≤‡ßã‡¶ó‡ßã ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ: ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá‡¶∞ ‡¶¨‡¶¶‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡ßã‡¶ó‡ßã‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡¶ø‡¶® */}
                    <img 
                        src="https://github.com/tanjim-ahmmed-shuvo/storehubbd/blob/main/logo.jpg" 
                        alt="StoreHub Logo" 
                        className="h-10 w-10 object-contain rounded-full bg-white border-2 border-blue-400"
                    />
                    <h1 className="text-lg font-bold uppercase tracking-wider">StoreHub BD</h1>
                </div>
                <span className="text-xs bg-blue-800 px-2 py-1 rounded text-blue-200 font-mono">ID: {orderId}</span>
            </div>

            {/* Content Area */}
            <div className="pb-10">
                
                {/* STEP 1: Product Details & Shipping Form */}
                {step === 1 && (
                    <div className="animate-fade-in">
                        {/* Product Image */}
                        <div className="relative">
                            <img 
                                src="https://m.media-amazon.com/images/I/61y+2+3k3DL._AC_SL1500_.jpg" 
                                alt="Stun Gun 928" 
                                className="w-full h-64 object-cover"
                                onError={(e) => {e.target.src='https://github.com/tanjim-ahmmed-shuvo/storehubbd/blob/main/poster.jpg'}}
                            />
                            <div className="absolute top-4 right-4 bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow-md animate-pulse">
                                ‡¶´‡ßç‡¶∞‡¶ø ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø
                            </div>
                        </div>

                        {/* Product Info */}
                        <div className="p-5">
                            <h2 className="text-2xl font-bold text-gray-800 mb-2">Self Defence Stun Gun (Model 928)</h2>
                            
                            <div className="flex items-end gap-3 mb-4">
                                <span className="text-3xl font-bold text-blue-600">‡ß≥{discountPrice}</span>
                                <span className="text-lg text-gray-400 line-through mb-1">‡ß≥{regularPrice}</span>
                                <span className="text-sm bg-green-100 text-green-700 px-2 py-1 rounded mb-1">‡ßß‡ß≠% ‡¶õ‡¶æ‡ßú</span>
                            </div>

                            {/* Features */}
                            <div className="bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200">
                                <h3 className="font-semibold text-gray-700 mb-2 border-b pb-1">‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£:</h3>
                                <ul className="text-sm text-gray-600 space-y-2">
                                    <li className="flex items-center gap-2"><i className="fas fa-bolt text-yellow-500"></i> ‡¶π‡¶æ‡¶á ‡¶≠‡ßã‡¶≤‡ßç‡¶ü‡ßá‡¶ú ‡¶∂‡¶ï ‡¶™‡ßç‡¶∞‡ßã‡¶ü‡ßá‡¶ï‡¶∂‡¶®</li>
                                    <li className="flex items-center gap-2"><i className="fas fa-lightbulb text-yellow-500"></i> ‡¶∂‡¶ï‡ßç‡¶§‡¶ø‡¶∂‡¶æ‡¶≤‡ßÄ LED ‡¶´‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶∂‡¶≤‡¶æ‡¶á‡¶ü</li>
                                    <li className="flex items-center gap-2"><i className="fas fa-battery-full text-green-500"></i> ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶¨‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡¶ø (‡¶ï‡¶∞‡ßç‡¶° ‡¶∏‡¶π)</li>
                                    <li className="flex items-center gap-2"><i className="fas fa-shield-alt text-blue-500"></i> ‡¶ó‡ßç‡¶∞‡¶ø‡¶™ ‡¶∏‡ßá‡¶´‡¶ü‡¶ø ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®</li>
                                    <li className="flex items-center gap-2 font-bold text-blue-700"><i className="fas fa-shipping-fast"></i> ‡ß®-‡ß© ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø</li>
                                </ul>
                            </div>

                            {/* Quantity Selector & Total Price Show */}
                            <div className="bg-blue-50 p-4 rounded-lg mb-6 border border-blue-200">
                                <h3 className="font-bold text-gray-800 mb-3">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</h3>
                                <div className="flex justify-between items-center">
                                    <div className="flex items-center bg-white rounded-lg shadow border border-gray-300">
                                        <button onClick={decreaseQty} className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-l-lg text-lg font-bold text-gray-600">-</button>
                                        <span className="px-6 py-2 font-bold text-xl text-gray-800">{quantity}</span>
                                        <button onClick={increaseQty} className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-r-lg text-lg font-bold text-gray-600">+</button>
                                    </div>
                                    <div className="text-right">
                                        <span className="text-xs text-gray-500 block">‡¶Æ‡ßã‡¶ü ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø:</span>
                                        <span className="text-2xl font-bold text-blue-700">‡ß≥{totalPrice}</span>
                                    </div>
                                </div>
                            </div>

                            {/* Alert Box */}
                            <div className="bg-yellow-50 border-l-4 border-yellow-500 p-3 mb-6">
                                <p className="text-sm text-yellow-800">
                                    <i className="fas fa-info-circle mr-1"></i>
                                    ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶ü‡¶ø ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶ï‡¶∞‡¶§‡ßá <b>‡ßß‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</b> ‡¶Ö‡¶ó‡ßç‡¶∞‡¶ø‡¶Æ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§ 
                                    ‡¶¨‡¶æ‡¶ï‡¶ø <b>{totalPrice - 100} ‡¶ü‡¶æ‡¶ï‡¶æ</b> ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶¶‡¶ø‡¶¨‡ßá‡¶®‡•§
                                </p>
                            </div>

                            {/* Order Form Step 1 */}
                            <form onSubmit={handleNext} className="space-y-4">
                                <h3 className="text-lg font-bold text-gray-800 border-l-4 border-blue-600 pl-3">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶´‡¶∞‡ßç‡¶Æ‡¶ü‡¶ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                                    <input 
                                        type="text" 
                                        name="name"
                                        required
                                        value={formData.name}
                                        onChange={handleChange}
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                        placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</label>
                                    <input 
                                        type="tel" 
                                        name="phone"
                                        required
                                        value={formData.phone}
                                        onChange={handleChange}
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                        placeholder="01XXXXXXXXX"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</label>
                                    <textarea 
                                        name="address"
                                        required
                                        value={formData.address}
                                        onChange={handleChange}
                                        rows="2"
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                        placeholder="‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ/‡¶∞‡ßã‡¶°, ‡¶•‡¶æ‡¶®‡¶æ, ‡¶ú‡ßá‡¶≤‡¶æ"
                                    ></textarea>
                                </div>

                                <button 
                                    type="submit" 
                                    className="w-full bg-blue-600 text-white py-3 rounded-lg font-bold text-lg hover:bg-blue-700 transition shadow-lg flex justify-center items-center gap-2"
                                >
                                    ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ß‡¶æ‡¶™ <i className="fas fa-arrow-right"></i>
                                </button>
                            </form>
                        </div>
                    </div>
                )}

                {/* STEP 2: Payment */}
                {step === 2 && (
                    <div className="p-5 animate-fade-in">
                        <button onClick={() => setStep(1)} className="text-gray-500 mb-4 flex items-center gap-1 text-sm">
                            <i className="fas fa-arrow-left"></i> ‡¶™‡ßá‡¶õ‡¶®‡ßá ‡¶Ø‡¶æ‡¶®
                        </button>

                        <div className="bg-white p-6 rounded-xl shadow-md border border-gray-100 text-center mb-6">
                            <div className="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i className="fas fa-wallet text-2xl text-blue-600"></i>
                            </div>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
                            
                            {/* Order Summary in Payment Page */}
                            <div className="bg-gray-50 p-3 rounded mb-4 text-sm">
                                <div className="flex justify-between mb-1">
                                    <span>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</span>
                                    <span className="font-bold">{quantity} ‡¶ü‡¶ø</span>
                                </div>
                                <div className="flex justify-between mb-1">
                                    <span>‡¶Æ‡ßã‡¶ü ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø:</span>
                                    <span className="font-bold">‡ß≥{totalPrice}</span>
                                </div>
                                <div className="flex justify-between text-blue-600 font-bold border-t pt-1 mt-1">
                                    <span>‡¶Ö‡¶ó‡ßç‡¶∞‡¶ø‡¶Æ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü:</span>
                                    <span>‡ß≥{advancePayment}</span>
                                </div>
                            </div>

                            <p className="text-gray-600 text-sm mb-4">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶ü‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá <b>‡ßß‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</b> ‡¶∏‡ßá‡¶®‡ßç‡¶° ‡¶Æ‡¶æ‡¶®‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                            
                            <div className="bg-gray-100 p-4 rounded-lg">
                                <div className="flex justify-between items-center mb-2 border-b border-gray-300 pb-2">
                                    <span className="font-bold text-pink-600"><i className="fas fa-mobile-alt"></i> ‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂:</span>
                                    <span className="font-mono text-lg select-all cursor-pointer" onClick={() => navigator.clipboard.writeText(bkashNumber)}>{bkashNumber}</span>
                                </div>
                                <div className="flex justify-between items-center">
                                    <span className="font-bold text-orange-600"><i className="fas fa-mobile-alt"></i> ‡¶®‡¶ó‡¶¶:</span>
                                    <span className="font-mono text-lg select-all cursor-pointer" onClick={() => navigator.clipboard.writeText(nagadNumber)}>{nagadNumber}</span>
                                </div>
                                <p className="text-xs text-gray-400 mt-2 text-center">(‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®)</p>
                            </div>
                        </div>

                        <form onSubmit={handleOrderConfirm} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">‡¶Ø‡ßá‡¶á ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶®</label>
                                <input 
                                    type="tel" 
                                    name="senderNumber"
                                    required
                                    value={formData.senderNumber}
                                    onChange={handleChange}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                    placeholder="e.g. 017XXXXXXXX"
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø (TrxID)</label>
                                <input 
                                    type="text" 
                                    name="trxId"
                                    required
                                    value={formData.trxId}
                                    onChange={handleChange}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                    placeholder="e.g. 8H3K9..."
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">‡¶®‡ßã‡¶ü (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)</label>
                                <input 
                                    type="text" 
                                    name="note"
                                    value={formData.note}
                                    onChange={handleChange}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                    placeholder="‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶§‡¶•‡ßç‡¶Ø..."
                                />
                            </div>

                            <button 
                                type="submit" 
                                className="w-full bg-green-600 text-white py-3 rounded-lg font-bold text-lg hover:bg-green-700 transition shadow-lg flex justify-center items-center gap-2"
                            >
                                <i className="fas fa-check-circle"></i> ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                        </form>
                    </div>
                )}

                {/* STEP 3: Success */}
                {step === 3 && (
                    <div className="p-5 text-center animate-fade-in pt-10">
                        <div className="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i className="fas fa-check text-4xl text-green-600"></i>
                        </div>
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶, {formData.name}!</h2>
                        <p className="text-gray-600 mb-6">
                            ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶ü‡¶ø ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ ‡ß®-‡ß© ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§<br/>
                            <span className="font-semibold text-blue-600">‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶π‡¶æ‡¶§‡ßá ‡¶™‡ßá‡ßü‡ßá, ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡¶ï‡ßá ‡¶¶‡¶ø‡¶¨‡ßá‡¶®‡•§</span>
                        </p>
                        
                        {/* Receipt Container (‡¶è‡¶á ‡¶Ö‡¶Ç‡¶∂‡¶ü‡¶ø ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá) */}
                        <div id="receipt-content" className="bg-white p-5 rounded-lg shadow-sm border border-gray-200 text-left mb-6 relative">
                            {/* Header for Receipt */}
                            <div className="border-b border-gray-200 pb-3 mb-3 text-center flex flex-col items-center">
                                {/* ADDED LOGO HERE */}
                                <img 
                                    src="https://github.com/tanjim-ahmmed-shuvo/storehubbd/blob/main/logo.jpg" 
                                    alt="StoreHub Logo" 
                                    className="h-12 w-12 object-contain rounded-full bg-white border-2 border-blue-400 mb-2"
                                />
                                <h2 className="text-xl font-bold uppercase text-blue-900 tracking-wider">StoreHub BD</h2>
                                <p className="text-xs text-gray-500">Order Receipt</p>
                                <p className="text-xs text-gray-400">Date: {new Date().toLocaleDateString()}</p>
                            </div>

                            {/* Customer Details */}
                            <div className="mb-4 text-sm text-gray-700">
                                <p className="mb-1"><span className="font-semibold">Name:</span> {formData.name}</p>
                                <p className="mb-1"><span className="font-semibold">Phone:</span> {formData.phone}</p>
                                <p className="mb-1"><span className="font-semibold">Address:</span> {formData.address}</p>
                            </div>

                            {/* Item Table */}
                            <table className="w-full text-sm mb-4 text-gray-700 border-collapse">
                                <thead>
                                    <tr className="border-b border-gray-300">
                                        <th className="text-left py-2">Item</th>
                                        <th className="text-right py-2">Qty</th>
                                        <th className="text-right py-2">Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td className="py-2">Stun Gun 928</td>
                                        <td className="text-right py-2">{quantity}</td>
                                        <td className="text-right py-2">{totalPrice} Tk</td>
                                    </tr>
                                </tbody>
                            </table>

                            {/* Calculations */}
                            <div className="border-t border-gray-200 pt-2 mt-2 text-sm text-gray-700">
                                <div className="flex justify-between mb-1">
                                    <span>Subtotal:</span>
                                    <span>‡ß≥{totalPrice}</span>
                                </div>
                                <div className="flex justify-between mb-1">
                                    <span>Delivery:</span>
                                    <span>Free</span>
                                </div>
                                <div className="flex justify-between mb-1">
                                    <span>Paid (Advance):</span>
                                    <span>- ‡ß≥100</span>
                                </div>
                                <div className="flex justify-between text-blue-600 font-bold border-t border-dashed border-gray-300 mt-2 pt-2">
                                    <span>Due Amount:</span>
                                    <span>‡ß≥{totalPrice - 100}</span>
                                </div>
                            </div>
                            
                            <div className="mt-6 text-center text-xs text-gray-400 border-t border-gray-100 pt-2">
                                Order ID: #{orderId} <br/>
                                <span className="text-[10px] text-gray-300">Generated by StoreHub BD</span>
                            </div>
                        </div>

                        {/* Download Button */}
                        <button 
                            onClick={downloadReceipt}
                            className="w-full bg-gray-800 text-white py-2 rounded-lg font-bold hover:bg-gray-900 transition flex justify-center items-center gap-2 mb-6 shadow-lg"
                        >
                            <i className="fas fa-file-download"></i> ‡¶∞‡¶ø‡¶∏‡¶ø‡¶™‡ßç‡¶ü ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>

                        {/* Order Status Display (Outside PDF) */}
                        <div className="bg-blue-50 border border-blue-200 p-4 rounded-lg inline-block w-full mb-6 text-left">
                            <div className="flex justify-between items-center mb-2">
                                <span className="text-sm text-gray-500 uppercase">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</span>
                                <span className="text-sm font-bold text-blue-600 animate-pulse">Order In Review</span>
                            </div>
                            <div className="border-t pt-2 mt-2 text-sm text-gray-700">
                                <div className="flex justify-between">
                                    <span>‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞:</span>
                                    <span className="font-bold">‡ß≥{totalPrice}</span>
                                </div>
                                <div className="flex justify-between">
                                    <span>‡¶Ö‡¶ó‡ßç‡¶∞‡¶ø‡¶Æ:</span>
                                    <span className="font-bold">- ‡ß≥100</span>
                                </div>
                                <div className="flex justify-between text-red-600 font-bold border-t border-dashed mt-1 pt-1">
                                    <span>‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶® ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø:</span>
                                    <span>‡ß≥{totalPrice - 100}</span>
                                </div>
                            </div>
                        </div>

                        {/* Contact Options */}
                        <div className="space-y-3">
                            <p className="text-sm font-semibold text-gray-700">‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø:</p>
                            <div className="grid grid-cols-3 gap-3">
                                <a href="tel:+8801647775899" className="flex flex-col items-center justify-center bg-white p-3 rounded shadow hover:bg-gray-50 border border-gray-200">
                                    <i className="fas fa-phone-alt text-xl text-gray-700 mb-1"></i>
                                    <span className="text-xs">‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                                </a>
                                <a href="https://wa.me/16506687797" target="_blank" className="flex flex-col items-center justify-center bg-white p-3 rounded shadow hover:bg-gray-50 border border-gray-200">
                                    <i className="fab fa-whatsapp text-xl text-green-500 mb-1"></i>
                                    <span className="text-xs">‡¶π‡ßã‡ßü‡¶æ‡¶ü‡¶∏‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™</span>
                                </a>
                                <a href="https://www.facebook.com/messages/t/895873023615199" target="_blank" className="flex flex-col items-center justify-center bg-white p-3 rounded shadow hover:bg-gray-50 border border-gray-200">
                                    <i className="fab fa-facebook-messenger text-xl text-blue-500 mb-1"></i>
                                    <span className="text-xs">‡¶Æ‡ßá‡¶∏‡ßá‡¶û‡ßç‡¶ú‡¶æ‡¶∞</span>
                                </a>
                            </div>
                        </div>

                        <div className="mt-8 text-xs text-gray-400">
                            ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: #{orderId}
                        </div>
                    </div>
                )}

            </div>

            {/* Footer */}
            <div className="bg-gray-800 text-gray-400 text-center py-4 text-sm mt-auto">
                <p>&copy; 2024 StoreHub BD. All rights reserved.</p>
            </div>

        </div>
    );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);

</script>

</body>
</html>
